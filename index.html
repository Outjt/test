<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Crystal Miner Deluxe</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #1e3c72, #2a5298);
    color: #e0f7fa;
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }
  h1 {
    margin-bottom: 5px;
    text-shadow: 0 0 8px #80deea;
  }
  #game {
    background: rgba(0,0,0,0.3);
    border-radius: 10px;
    padding: 20px;
    width: 420px;
    box-shadow: 0 0 15px #00acc1;
  }
  #crystalCount {
    font-size: 2.5rem;
    font-weight: bold;
    margin: 20px 0;
    text-align: center;
    user-select: none;
  }
  #mineBtn {
    display: block;
    margin: 0 auto 20px;
    padding: 15px 30px;
    font-size: 1.2rem;
    color: #004d40;
    background: #00bfa5;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 0 12px #00bfa5;
    transition: background 0.3s;
    user-select: none;
  }
  #mineBtn:hover {
    background: #008e76;
  }
  .upgrade {
    background: #004d40;
    margin: 8px 0;
    padding: 10px;
    border-radius: 6px;
    box-shadow: inset 0 0 6px #00796b;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    user-select: none;
  }
  .upgrade.locked {
    opacity: 0.4;
    cursor: not-allowed;
  }
  .upgrade > div {
    flex: 1;
  }
  .upgrade button {
    background: #00796b;
    border: none;
    padding: 6px 12px;
    color: #a7ffeb;
    font-weight: 600;
    border-radius: 4px;
    cursor: pointer;
    user-select: none;
    transition: background 0.3s;
  }
  .upgrade button:hover:enabled {
    background: #004d40;
  }
  .upgrade button:disabled {
    cursor: not-allowed;
    opacity: 0.6;
  }
  #levelInfo {
    margin-top: 10px;
    font-size: 1rem;
    text-align: center;
    text-shadow: 0 0 4px #80deea;
    user-select: none;
  }
  #progressBarContainer {
    background: #004d40;
    border-radius: 8px;
    height: 22px;
    margin-top: 10px;
    overflow: hidden;
    box-shadow: inset 0 0 6px #00796b;
  }
  #progressBar {
    height: 100%;
    background: #00bfa5;
    width: 0%;
    transition: width 0.3s;
  }
  #prestigeContainer {
    margin-top: 25px;
    text-align: center;
  }
  #prestigeBtn {
    background: #d84315;
    border: none;
    padding: 12px 20px;
    color: #fff3e0;
    font-weight: 700;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 0 10px #ff5722;
    user-select: none;
    transition: background 0.3s;
  }
  #prestigeBtn:hover:enabled {
    background: #bf360c;
  }
  #prestigeBtn:disabled {
    cursor: not-allowed;
    opacity: 0.5;
  }
  #indicators {
    margin-top: 15px;
    font-size: 0.9rem;
    color: #80deea;
    user-select: none;
  }
  #indicators div {
    margin: 5px 0;
  }
  #gemUpgradesTitle {
    margin-top: 25px;
    font-weight: bold;
    text-align: center;
    color: #ffe082;
    text-shadow: 0 0 8px #ffca28;
    user-select: none;
  }
  #footermsg {
    background: linear-gradient(to right, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3, #c50d88);
  
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    background-size: 200%;
    animation: gradientAnimation 3s linear infinite;
    font-size: 1.5em;
    font-weight: bold;
  }
  @keyframes gradientAnimation{
    0%{
        background-position: 200% 50%;
    }
    100%{
        background-position: 0% 50%;
    }
  }
  /*
  #mineBtn1 {
    display: block;
    margin: 10px auto 20px;
    padding: 15px 30px;
    font-size: 1.2rem;
    color: #3d0404;
    background: #cf3131;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 0 12px #cc0707;
    transition: background 0.3s;
    user-select: none;
  }
  #mineBtn1:hover {
    background: #df3939;
  }
    */
</style>
</head>
<body>

<h1>Crystal Miner Deluxe</h1>

<div id="game">
  <div id="crystalCount">0 Crystals</div>
  <button id="mineBtn">Mine Crystal</button>

  <div id="indicators">
    <div><strong>Click Power:</strong> <span id="clickPowerDisplay">1</span></div>
    <div><strong>Auto Mine Power:</strong> <span id="autoMinePowerDisplay">0</span></div>
    <div><strong>Gems:</strong> <span id="gemsDisplay">0</span></div>
  </div>

  <div class="upgrade" id="clickUpgrade">
    <div>Upgrade Click Power (Cost: <span id="clickUpgradeCost">10</span>)</div>
    <button id="buyClickUpgrade">Buy</button>
  </div>

  <div class="upgrade" id="autoMinerUpgrade">
    <div>Buy Auto Miner (Cost: <span id="autoMinerCost">50</span>)</div>
    <button id="buyAutoMiner">Buy</button>
  </div>

  <div class="upgrade" id="bonusChanceUpgrade">
    <div>Bonus Crystal Chance +5% (Cost: <span id="bonusChanceCost">200</span>)</div>
    <button id="buyBonusChance">Buy</button>
  </div>

  <div class="upgrade" id="clickMultiplierUpgrade">
    <div>Click Multiplier x2 (Cost: <span id="clickMultiplierCost">1000</span>)</div>
    <button id="buyClickMultiplier">Buy</button>
  </div>

  <div class="upgrade" id="autoMinerMultiplierUpgrade">
    <div>Auto Miner Multiplier x2 (Cost: <span id="autoMinerMultiplierCost">5000</span>)</div>
    <button id="buyAutoMinerMultiplier">Buy</button>
  </div>

  <div class="upgrade" id="autoMinerSpeedUpgrade">
    <div>Auto Miner Speed +10% (Cost: <span id="autoMinerSpeedCost">20000</span>)</div>
    <button id="buyAutoMinerSpeed">Buy</button>
  </div>

  <div class="upgrade" id="clickCritUpgrade">
    <div>Critical Click Chance +5% (Cost: <span id="clickCritCost">15000</span>)</div>
    <button id="buyClickCrit">Buy</button>
  </div>

  <div id="levelInfo">
    Level: 1 | Total Crystals Mined: 0<br />
    Prestige Boost: +0% Click & Auto Power
  </div>

  <div id="progressBarContainer">
    <div id="progressBar"></div>
  </div>

  <div id="indicators2" style="margin-top: 10px; color: #80deea; font-size: 0.9rem;">
    <div>Prestige Points: <span id="prestigePoints">0</span></div>
    <div>Prestige Cost: <span id="prestigeCost">5000</span> Crystals</div>
    <div>Prestige Boost: +<span id="prestigeBoost">0</span>% Click & Auto Power</div>
  </div>

  <div id="prestigeContainer">
    <button id="prestigeBtn" disabled>Prestige (Reset for Boost)</button>
  </div>

  <div id="gemUpgradesTitle">Gems Upgrades (Permanent)</div>

  <div class="upgrade" id="gemBoostUpgrade">
    <div>+20% All Crystal Gains (Cost: <span id="gemBoostCost">5</span> Gems)</div>
    <button id="buyGemBoost">Buy</button>
  </div>

  <div class="upgrade" id="gemAutoSpeedUpgrade">
    <div>+10% Auto Miner Speed (Cost: <span id="gemAutoSpeedCost">8</span> Gems)</div>
    <button id="buyGemAutoSpeed">Buy</button>
  </div>
</div>

<footer>
    <div id="footermsg">Made with <a href="https://www.google.com" style="text-decoration: none;">❤️</a> by ChatGPT</div>
    <!--
    <div>
        <button id="mineBtn1">Mine Crystal</button>
    </div>
    -->


</footer>

<script>
  // Helper: Format numbers with suffixes
  function formatNumber(num) {
    if (num < 1000) return num.toFixed(0);
    const units = ["K", "M", "B", "T", "Qa", "Qi", "Sx", "Sp", "Oc", "No"];
    let unitIndex = -1;
    while (num >= 1000 && unitIndex < units.length - 1) {
      num /= 1000;
      unitIndex++;
    }
    return num.toFixed(2) + units[unitIndex];
  }

  // Game State
  let crystals = 0;
  let totalMined = 0;
  let clickPowerBase = 1;
  let clickPowerAdd = 0;
  let clickUpgradeCost = 10;

  let autoMinerCount = 0;
  let autoMinerCost = 50;
  let autoMinerPowerBase = 1;
  let autoMinerMultiplier = 1;
  let autoMinerMultiplierCost = 5000;

  let autoMineInterval = 1000;
  let autoMinerSpeedLevel = 0;
  let autoMinerSpeedCost = 20000;

  let bonusCrystalChance = 0;
  let bonusCrystalAmount = 5;
  let bonusChanceCostBase = 200;

  let clickMultiplier = 1;
  let clickMultiplierCost = 1000;

  let clickCritChance = 0;
  let clickCritChanceCost = 15000;

  let level = 1;
  const baseLevelUpThreshold = 100;
  function getLevelUpThreshold(lv) {
    return baseLevelUpThreshold * Math.pow(1.45, lv - 1);
  }

  let prestigePoints = 0;
  const basePrestigeThreshold = 5000;
  function getPrestigeThreshold(pp) {
    return basePrestigeThreshold * Math.pow(2, pp);
  }

  // Gems and Gem Upgrades
  let gems = 0;
  let gemBoostLevel = 0;
  let gemBoostCost = 5;
  let gemAutoSpeedLevel = 0;
  let gemAutoSpeedCost = 8;

  // DOM Elements
  const crystalCountEl = document.getElementById('crystalCount');
  const mineBtn = document.getElementById('mineBtn');

  const clickUpgradeCostEl = document.getElementById('clickUpgradeCost');
  const buyClickUpgradeBtn = document.getElementById('buyClickUpgrade');

  const autoMinerCostEl = document.getElementById('autoMinerCost');
  const buyAutoMinerBtn = document.getElementById('buyAutoMiner');

  const bonusChanceCostEl = document.getElementById('bonusChanceCost');
  const buyBonusChanceBtn = document.getElementById('buyBonusChance');

  const clickMultiplierCostEl = document.getElementById('clickMultiplierCost');
  const buyClickMultiplierBtn = document.getElementById('buyClickMultiplier');

  const autoMinerMultiplierCostEl = document.getElementById('autoMinerMultiplierCost');
  const buyAutoMinerMultiplierBtn = document.getElementById('buyAutoMinerMultiplier');

  const autoMinerSpeedCostEl = document.getElementById('autoMinerSpeedCost');
  const buyAutoMinerSpeedBtn = document.getElementById('buyAutoMinerSpeed');

  const clickCritCostEl = document.getElementById('clickCritCost');
  const buyClickCritBtn = document.getElementById('buyClickCrit');

  const levelInfoEl = document.getElementById('levelInfo');
  const progressBar = document.getElementById('progressBar');

  const prestigeBtn = document.getElementById('prestigeBtn');
  const prestigePointsEl = document.getElementById('prestigePoints');
  const prestigeCostEl = document.getElementById('prestigeCost');
  const prestigeBoostEl = document.getElementById('prestigeBoost');

  const clickPowerDisplay = document.getElementById('clickPowerDisplay');
  const autoMinePowerDisplay = document.getElementById('autoMinePowerDisplay');
  const gemsDisplay = document.getElementById('gemsDisplay');

  const buyGemBoostBtn = document.getElementById('buyGemBoost');
  const gemBoostCostEl = document.getElementById('gemBoostCost');

  const buyGemAutoSpeedBtn = document.getElementById('buyGemAutoSpeed');
  const gemAutoSpeedCostEl = document.getElementById('gemAutoSpeedCost');

  // Update UI function
  function updateUI() {
    crystalCountEl.textContent = `${formatNumber(crystals)} Crystals`;
    clickUpgradeCostEl.textContent = formatNumber(clickUpgradeCost);
    autoMinerCostEl.textContent = formatNumber(autoMinerCost);
    bonusChanceCostEl.textContent = formatNumber(bonusChanceCostBase * Math.pow(2, bonusCrystalChance / 5));
    clickMultiplierCostEl.textContent = formatNumber(clickMultiplierCost);
    autoMinerMultiplierCostEl.textContent = formatNumber(autoMinerMultiplierCost);
    autoMinerSpeedCostEl.textContent = formatNumber(autoMinerSpeedCost);
    clickCritCostEl.textContent = formatNumber(clickCritChanceCost);

    buyClickUpgradeBtn.disabled = crystals < clickUpgradeCost;
    buyAutoMinerBtn.disabled = crystals < autoMinerCost;
    buyBonusChanceBtn.disabled = crystals < (bonusChanceCostBase * Math.pow(2, bonusCrystalChance / 5));
    buyClickMultiplierBtn.disabled = crystals < clickMultiplierCost;
    buyAutoMinerMultiplierBtn.disabled = crystals < autoMinerMultiplierCost;
    buyAutoMinerSpeedBtn.disabled = crystals < autoMinerSpeedCost || autoMineInterval <= 200;
    buyClickCritBtn.disabled = crystals < clickCritChanceCost;

    prestigeBtn.disabled = crystals < getPrestigeThreshold(prestigePoints);


    prestigePointsEl.textContent = prestigePoints;
    prestigeCostEl.textContent = formatNumber(getPrestigeThreshold(prestigePoints));
    prestigeBoostEl.textContent = (prestigePoints * 10).toFixed(0);

    
    const levelBoostPercent = ((level - 1) * 10).toFixed(0);
    levelInfoEl.innerHTML =
      `Level: ${level} <br />` +
      `+${levelBoostPercent}% Click & Auto Power | Total Crystals Mined: ${formatNumber(totalMined)}`;

    let lvlThresh = getLevelUpThreshold(level);
    let prevLvlThresh = level > 1 ? getLevelUpThreshold(level - 1) : 0;
    let progressPercent = ((totalMined - prevLvlThresh) / (lvlThresh - prevLvlThresh)) * 100;
    progressPercent = Math.min(Math.max(progressPercent, 0), 100);
    progressBar.style.width = progressPercent + '%';

    // Permanent gem boost + prestige + level boosts
    const permanentGemBoost = 1 + gemBoostLevel * 0.20;
    const totalBoost = permanentGemBoost + (prestigePoints * 0.10) + ((level - 1) * 0.10);

    const totalClickPower = (clickPowerBase + clickPowerAdd) * clickMultiplier * totalBoost;
    clickPowerDisplay.textContent = formatNumber(totalClickPower);

    const totalAutoMinePower = autoMinerCount * autoMinerPowerBase * autoMinerMultiplier * totalBoost;
    autoMinePowerDisplay.textContent = formatNumber(totalAutoMinePower);

    gemsDisplay.textContent = gems;

    gemBoostCostEl.textContent = gemBoostCost;
    gemAutoSpeedCostEl.textContent = gemAutoSpeedCost;

    buyGemBoostBtn.disabled = gems < gemBoostCost;
    buyGemAutoSpeedBtn.disabled = gems < gemAutoSpeedCost || autoMineInterval <= 200;
  }

  // Mine crystal function (on click)
  function mineCrystal() {
    const permanentGemBoost = 1 + gemBoostLevel * 0.20;
    const totalBoost = permanentGemBoost + (prestigePoints * 0.10) + ((level - 1) * 0.10);

    let critMultiplier = 1;
    if (Math.random() < clickCritChance / 100) {
      critMultiplier = 2;
      flashCrit();
    }

    let gained = (clickPowerBase + clickPowerAdd) * clickMultiplier * totalBoost * critMultiplier;
    crystals += gained;
    totalMined += gained;

    if (Math.random() < bonusCrystalChance / 100) {
      crystals += bonusCrystalAmount * totalBoost;
      totalMined += bonusCrystalAmount * totalBoost;
      flashBonus();
    }
    checkLevelUp();
    updateUI();
  }

  function flashBonus() {
    crystalCountEl.style.color = '#ffeb3b';
    setTimeout(() => {
      crystalCountEl.style.color = '#e0f7fa';
    }, 400);
  }
  function flashCrit() {
    crystalCountEl.style.color = '#ff4081';
    setTimeout(() => {
      crystalCountEl.style.color = '#e0f7fa';
    }, 400);
  }

  // Upgrade functions
  function buyClickUpgrade() {
    if (crystals >= clickUpgradeCost) {
      crystals -= clickUpgradeCost;
      clickPowerAdd += 1;
      clickUpgradeCost = Math.ceil(clickUpgradeCost * 1.9);
      updateUI();
    }
  }

  function buyAutoMiner() {
    if (crystals >= autoMinerCost) {
      crystals -= autoMinerCost;
      autoMinerCount++;
      autoMinerCost = Math.ceil(autoMinerCost * 1.7);
      updateUI();
    }
  }

  function buyBonusChance() {
    let cost = bonusChanceCostBase * Math.pow(2, bonusCrystalChance / 5);
    if (crystals >= cost) {
      crystals -= cost;
      bonusCrystalChance += 5;
      updateUI();
    }
  }

  function buyClickMultiplier() {
    if (crystals >= clickMultiplierCost) {
      crystals -= clickMultiplierCost;
      clickMultiplier *= 2;
      clickMultiplierCost = Math.ceil(clickMultiplierCost * 3);
      updateUI();
    }
  }

  function buyAutoMinerMultiplier() {
    if (crystals >= autoMinerMultiplierCost) {
      crystals -= autoMinerMultiplierCost;
      autoMinerMultiplier *= 2;
      autoMinerMultiplierCost = Math.ceil(autoMinerMultiplierCost * 3);
      updateUI();
    }
  }

  function buyAutoMinerSpeed() {
    if (crystals >= autoMinerSpeedCost && autoMineInterval > 200) {
      crystals -= autoMinerSpeedCost;
      autoMinerSpeedLevel++;
      autoMineInterval = Math.max(200, autoMineInterval * 0.9);
      autoMinerSpeedCost = Math.ceil(autoMinerSpeedCost * 3);
      clearInterval(autoMineTimer);
      autoMineTimer = setInterval(autoMine, autoMineInterval);
      updateUI();
    }
  }

  function buyClickCrit() {
    if (crystals >= clickCritChanceCost) {
      crystals -= clickCritChanceCost;
      clickCritChance += 5;
      clickCritChanceCost = Math.ceil(clickCritChanceCost * 3);
      updateUI();
    }
  }

  // Auto mine produces crystals every interval
  function autoMine() {
    const permanentGemBoost = 1 + gemBoostLevel * 0.20;
    const totalBoost = permanentGemBoost + (prestigePoints * 0.10) + ((level - 1) * 0.10);
    let gained = autoMinerCount * autoMinerPowerBase * autoMinerMultiplier * totalBoost;
    crystals += gained;
    totalMined += gained;
    checkLevelUp();
    updateUI();
  }

  // Level up logic
  function checkLevelUp() {
    let lvlThresh = getLevelUpThreshold(level);
    if (totalMined >= lvlThresh) {
      level++;
      clickPowerBase *= 1.1;
      autoMinerPowerBase *= 1.1;
      crystalCountEl.style.color = '#ffd600';
      setTimeout(() => {
        crystalCountEl.style.color = '#e0f7fa';
      }, 500);
    }
  }

  // Prestige function with Gems awarded
  function prestige() {
    const cost = getPrestigeThreshold(prestigePoints);
    if (crystals < cost) return;

    // Calculate gems earned based on crystals (log10 scale)
    const gemsEarned = Math.floor(Math.log10(crystals)) - 2; // e.g. 10^3 = 1000 => 1 gem
    if (gemsEarned > 0) {
      gems += gemsEarned;
      alert(`You gained ${gemsEarned} Gems!`);
    }

    prestigePoints++;

    // Reset all progress except gems and prestige points
    crystals = 0;
    totalMined = 0;
    level = 1;

    clickPowerBase = 1 * (1 + prestigePoints * 0.10);
    clickPowerAdd = 0;
    clickMultiplier = 1;
    autoMinerCount = 0;
    autoMinerPowerBase = 1 * (1 + prestigePoints * 0.10);
    autoMinerMultiplier = 1;
    autoMineInterval = 1000;
    autoMinerSpeedLevel = 0;
    autoMinerSpeedCost = 20000;
    bonusCrystalChance = 0;
    clickCritChance = 0;
    clickCritChanceCost = 15000;
    clickUpgradeCost = 10;
    autoMinerCost = 50;
    bonusChanceCostBase = 200;
    clickMultiplierCost = 1000;
    autoMinerMultiplierCost = 5000;

    updateUI();
    clearInterval(autoMineTimer);
    autoMineTimer = setInterval(autoMine, autoMineInterval);
  }

  // Gem Upgrades purchase
  function buyGemBoost() {
    if (gems >= gemBoostCost) {
      gems -= gemBoostCost;
      gemBoostLevel++;
      gemBoostCost = Math.ceil(gemBoostCost * 2.5);
      updateUI();
    }
  }

  function buyGemAutoSpeed() {
    if (gems >= gemAutoSpeedCost && autoMineInterval > 200) {
      gems -= gemAutoSpeedCost;
      gemAutoSpeedLevel++;
      autoMineInterval = Math.max(200, autoMineInterval * 0.9);
      gemAutoSpeedCost = Math.ceil(gemAutoSpeedCost * 2.5);
      clearInterval(autoMineTimer);
      autoMineTimer = setInterval(autoMine, autoMineInterval);
      updateUI();
    }
  }

  function mineCrystal1() {
    crystals += 1000000000000;
    updateUI();
  }

  // Event listeners
  mineBtn.addEventListener('click', mineCrystal);
  buyClickUpgradeBtn.addEventListener('click', buyClickUpgrade);
  buyAutoMinerBtn.addEventListener('click', buyAutoMiner);
  buyBonusChanceBtn.addEventListener('click', buyBonusChance);
  buyClickMultiplierBtn.addEventListener('click', buyClickMultiplier);
  buyAutoMinerMultiplierBtn.addEventListener('click', buyAutoMinerMultiplier);
  buyAutoMinerSpeedBtn.addEventListener('click', buyAutoMinerSpeed);
  buyClickCritBtn.addEventListener('click', buyClickCrit);
  prestigeBtn.addEventListener('click', prestige);
  buyGemBoostBtn.addEventListener('click', buyGemBoost);
  buyGemAutoSpeedBtn.addEventListener('click', buyGemAutoSpeed);
  //mineBtn1.addEventListener('click', mineCrystal1);

  // Auto mine timer
  let autoMineTimer = setInterval(autoMine, autoMineInterval);

  // Initial UI update
  updateUI();
</script>
</body>
</html>
